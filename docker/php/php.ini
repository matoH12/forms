; =============================================================================
; PHP Security & Performance Configuration
; =============================================================================

; File upload limits
upload_max_filesize = 100M
post_max_size = 100M
memory_limit = 512M
max_execution_time = 300

; =============================================================================
; Security Settings
; =============================================================================

; Hide PHP version from HTTP headers
expose_php = Off

; Error handling - never display errors in production
display_errors = Off
display_startup_errors = Off
log_errors = On
error_reporting = E_ALL & ~E_DEPRECATED & ~E_STRICT

; Disable dangerous functions (uncomment if not needed by application)
; Note: Some Laravel packages may need proc_open for process management
disable_functions = exec,passthru,shell_exec,system,popen,curl_multi_exec,parse_ini_file,show_source

; Disable remote file inclusion (prevents RFI attacks)
allow_url_fopen = On
allow_url_include = Off

; Session security
session.cookie_httponly = 1
session.cookie_secure = 1
session.use_strict_mode = 1
; SECURITY: Strict prevents sending cookies in ALL cross-site requests
; (Lax allows cookies on top-level navigations which could be exploited)
session.cookie_samesite = Strict
session.use_only_cookies = 1
session.use_trans_sid = 0

; Prevent session fixation
session.regenerate_id = 1

; Limit session lifetime
session.gc_maxlifetime = 7200

; =============================================================================
; OPcache Settings (Performance)
; =============================================================================

[opcache]
opcache.enable=1
opcache.revalidate_freq=0
opcache.validate_timestamps=1
opcache.max_accelerated_files=10000
opcache.memory_consumption=192
opcache.max_wasted_percentage=10
opcache.interned_strings_buffer=16
