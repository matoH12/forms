# =============================================================================
# FORMS - Configuration File
# =============================================================================
# Copy this file to .env and modify values according to your needs:
#   cp .env.example .env
#
# After changing variables, restart containers:
#   docker-compose down && docker-compose up -d
# =============================================================================

# -----------------------------------------------------------------------------
# APPLICATION
# -----------------------------------------------------------------------------

# Application environment: production, local, testing
# - production: optimized for production deployment, caching enabled
# - local: development environment, caching disabled, detailed errors
APP_ENV=production

# Enable/disable debug mode (true/false)
# - true: shows detailed error messages (use only for development!)
# - false: hides error details from users (use in production)
APP_DEBUG=false

# Application encryption key (base64 encoded, 32 bytes)
# - REQUIRED: Must be set before running the application
# - Used for encrypting cookies, sessions and other sensitive data
# - WARNING: After changing the key, all existing sessions will be invalid!
#
# Generate with one of these methods:
#   docker-compose exec app php artisan key:generate --show
#   php artisan key:generate --show
#   openssl rand -base64 32 | sed 's/^/base64:/'
#
# Example format:
#   APP_KEY=base64:ABC123xyz789DEF456uvw012GHI345jkl678MNO90=
APP_KEY=

# Application URL (without trailing slash)
# - Used for generating absolute URLs in emails and API
# - Example: https://forms.example.com
APP_URL=http://localhost:8080

# -----------------------------------------------------------------------------
# DATABASE
# -----------------------------------------------------------------------------
# The application supports two modes:
# 1. Integrated MySQL container (default) - USE_EXTERNAL_DB=false
# 2. External database server - USE_EXTERNAL_DB=true

# Use external database server (true/false)
# - false: uses MySQL container from docker-compose
# - true: connects to external server defined below
USE_EXTERNAL_DB=false

# Database driver type
# - mysql: MySQL/MariaDB server
# - pgsql: PostgreSQL server (requires additional PHP extension)
# - sqlite: SQLite file (for development/testing only)
DB_CONNECTION=mysql

# Database server address
# - For integrated container: mysql (Docker service name)
# - For external server: IP address or hostname (e.g., db.example.com)
DB_HOST=mysql

# Database server port
# - MySQL/MariaDB: 3306 (standard port)
# - PostgreSQL: 5432
DB_PORT=3306

# Database name
# - Database is created automatically on first start (for integrated container)
# - For external server, database must exist
DB_DATABASE=formulare

# Database connection username
DB_USERNAME=formulare

# Database connection password
# - WARNING: Change to a strong password in production!
DB_PASSWORD=secret

# MySQL root user password (for integrated container only)
# - Used for database server administration
# - Ignored if USE_EXTERNAL_DB=true
DB_ROOT_PASSWORD=rootsecret

# SSL connection to database (for external server)
# - true: requires SSL certificate
# - false: connection without encryption
DB_SSL=false

# Path to SSL CA certificate (optional)
# - Used if DB_SSL=true
# DB_SSL_CA=/path/to/ca-cert.pem

# -----------------------------------------------------------------------------
# REDIS (Cache and Queues)
# -----------------------------------------------------------------------------

# Use external Redis server (true/false)
# - false: uses Redis container from docker-compose
# - true: connects to external server
USE_EXTERNAL_REDIS=false

# Redis server address
# - For integrated container: redis
# - For external server: IP address or hostname
REDIS_HOST=redis

# Redis server port (default 6379)
REDIS_PORT=6379

# Redis password (optional, leave empty if not set)
REDIS_PASSWORD=

# -----------------------------------------------------------------------------
# PORTS (for integrated containers only)
# -----------------------------------------------------------------------------

# Web application port (HTTP)
# - Access the application in browser on this port
# - Example: http://localhost:8080
HTTP_PORT=8080

# MySQL access port (for integrated container only)
# - Allows connection via MySQL client from outside Docker network
# - Set to 0 to disable external access
MYSQL_PORT=3306

# Redis access port (for integrated container only)
# - Set to 0 to disable external access
REDIS_PORT=6379

# -----------------------------------------------------------------------------
# INITIALIZATION
# -----------------------------------------------------------------------------

# Run database seeders on first start (true/false)
# - true: populates database with test/base data
# - false: creates only empty tables
# - Recommended: true for first installation, then change to false
RUN_SEEDERS=false

# -----------------------------------------------------------------------------
# ADMINISTRATORS
# -----------------------------------------------------------------------------
# Users who should automatically get admin privileges on login.
# Comma-separated list of emails or usernames.

# Admin emails (comma-separated)
# Example: admin@example.com,manager@example.com
ADMIN_EMAILS=admin@example.com

# Admin usernames/logins from Keycloak (comma-separated)
# Example: admin,manager
ADMIN_USERNAMES=admin

# -----------------------------------------------------------------------------
# KEYCLOAK SSO AUTHENTICATION
# -----------------------------------------------------------------------------
# The application uses Keycloak for Single Sign-On (SSO) authentication
# Get all settings from your Keycloak server administrator

# Keycloak server base URL
# - Example: https://sso.example.com
KEYCLOAK_BASE_URL=https://sso.example.com

# Keycloak realm name
# - Realm is an isolated area containing users and configuration
KEYCLOAK_REALM=MyRealm

# Your application's Client ID in Keycloak
# - Obtained when registering application in Keycloak admin console
KEYCLOAK_CLIENT_ID=

# Client Secret for authentication
# - Generated in Keycloak when creating client
# - WARNING: Never share publicly!
KEYCLOAK_CLIENT_SECRET=

# Redirect URI after successful login (optional)
# - If not set, uses APP_URL/auth/callback
# KEYCLOAK_REDIRECT_URI=

# -----------------------------------------------------------------------------
# EMAIL (SMTP)
# -----------------------------------------------------------------------------
# Settings for sending email notifications

# Mail driver type
# - smtp: standard SMTP server
# - sendmail: local sendmail utility
# - log: only logs emails (for testing)
MAIL_MAILER=smtp

# SMTP server address
# - Example: smtp.gmail.com, smtp.office365.com
MAIL_HOST=

# SMTP port
# - 587: TLS (recommended)
# - 465: SSL
# - 25: without encryption (not recommended)
MAIL_PORT=587

# SMTP connection encryption
# - tls: STARTTLS (port 587)
# - ssl: SSL/TLS (port 465)
# - null: without encryption
MAIL_ENCRYPTION=tls

# SMTP authentication - username
MAIL_USERNAME=

# SMTP authentication - password
MAIL_PASSWORD=

# Sender email address
# - This address appears in the "From:" field in emails
MAIL_FROM_ADDRESS=

# Sender name
# - Displayed next to email address in "From:" field
MAIL_FROM_NAME=Forms

# -----------------------------------------------------------------------------
# LOGGING AND MONITORING
# -----------------------------------------------------------------------------

# Logging level
# - debug: all messages (for development only)
# - info: informational messages and above
# - warning: warnings and errors
# - error: errors only
LOG_LEVEL=info

# Logging channel
# - stack: combination of multiple channels
# - daily: daily rotated files
# - single: single file
LOG_CHANNEL=daily

# Number of days to keep log files
LOG_DAYS=14

# -----------------------------------------------------------------------------
# TRAEFIK REVERSE PROXY (SSL/HTTPS)
# -----------------------------------------------------------------------------
# Traefik provides automatic SSL certificates via Let's Encrypt
# Activate it using: docker-compose --profile proxy up -d
#
# For hardened mode (no external ports except 80/443):
#   docker-compose --profile proxy --profile hardened up -d

# Application domain (REQUIRED for proxy mode)
# - Must be a publicly accessible domain pointing to this server
# - Let's Encrypt verifies domain ownership via HTTP challenge
# - Example: forms.example.com
TRAEFIK_DOMAIN=

# Email for Let's Encrypt notifications (REQUIRED)
# - You will be notified about certificate expiration
# - Use a valid email address
LETSENCRYPT_EMAIL=

# HTTP port for Traefik (default 80)
# - Used for HTTP -> HTTPS redirect
# - Also used for ACME HTTP challenge
TRAEFIK_HTTP_PORT=80

# HTTPS port for Traefik (default 443)
# - Main port for encrypted communication
TRAEFIK_HTTPS_PORT=443

# Trusted proxies for Laravel
# - * = trust all proxies (OK for Docker internal network)
# - For more specific settings, enter IP addresses separated by comma
TRUSTED_PROXIES=*

# Traefik logging level
# - DEBUG, INFO, WARN, ERROR
TRAEFIK_LOG_LEVEL=INFO

# Enable access log
TRAEFIK_ACCESS_LOG=false

# -----------------------------------------------------------------------------
# TRAEFIK DASHBOARD (Optional)
# -----------------------------------------------------------------------------
# Dashboard is DISABLED by default.
# When enabled, accessible at https://YOUR_DOMAIN/traefik/

# Enable Traefik dashboard (true/false)
TRAEFIK_DASHBOARD=false

# Authentication for Traefik dashboard (htpasswd format)
# - Generate: htpasswd -nb admin password
# - Example output: admin:$apr1$ruca84Hq$mbjdMZBAG.KWn7vfN/SNK/
# - WARNING: In .env double $ characters to $$
TRAEFIK_DASHBOARD_AUTH=

# -----------------------------------------------------------------------------
# WAF - ModSecurity with OWASP Core Rule Set
# -----------------------------------------------------------------------------
# WAF (Web Application Firewall) protects application against attacks
# Activate it using: docker-compose --profile waf up -d

# WAF mode
# - On: active blocking of attacks (production)
# - DetectionOnly: logging only, no blocking (testing)
WAF_MODE=On

# Paranoia level (1-4)
# - 1: Basic protection, few false positives (recommended for start)
# - 2: Medium protection
# - 3: High protection
# - 4: Maximum protection, more false positives
WAF_PARANOIA_LEVEL=1

# Anomaly scoring thresholds
# - How many points a request must accumulate to be blocked
# - Lower values = stricter, more blocking
WAF_ANOMALY_INBOUND=5
WAF_ANOMALY_OUTBOUND=4

# Maximum request body size (MB)
# - Larger requests will be rejected
WAF_MAX_BODY=100

# Disable specific rules (comma-separated rule IDs)
# - Useful if a rule causes false positives
# - Example: WAF_DISABLE_RULES=920350,942100
WAF_DISABLE_RULES=

# -----------------------------------------------------------------------------
# SYSTEM API (for external integrations)
# -----------------------------------------------------------------------------

# API token for system integrations (e.g., CMDB)
# - Used in header: Authorization: Bearer <token>
# - Generate: openssl rand -hex 32
SYSTEM_API_TOKEN=
